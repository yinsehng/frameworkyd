<%@page import="java.util.HashMap"%>
<%@page import="java.util.Map"%>
<%@page import="java.util.List"%>
<%@ page language="java" pageEncoding="utf-8" contentType="text/html; charset=utf-8"%>
 
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"+ request.getServerName() + ":" + request.getServerPort()+ path + "/";
	//获取数据
	List realtimePerson = (List) request.getAttribute("realtimePerson");
	List realtimeHospitalize = (List) request.getAttribute("realtimeHospitalize");
%>
<script type="text/javascript">

	//此处调用定时任务
	$(document).ready(function () {
		$(".scrollDiv").Scroll({line:1,speed:500,timer:2500,up:"but_up",down:"but_down"});
		$("#realtimeHospitalize").Scroll({line:1,speed:500,timer:2500,up:"but_up",down:"but_down"});
		
		setInterval("getRealtimePersonByAjax()", 10000);
	});
	
	function getRealtimePersonByAjax() {
		 
		
		$.ajax( {  
    	    url:'<%=basePath%>ActionServlet?method=realtimeHospitalizeAction&ajax=true',
			data : {},
			type : 'GET',
		    cache : false,
			dataType : 'json',
			success : function(data) {
				if (data != null) {
					var html = "";
					for (var i = 0; i < data.length; i++) {
						 html = html + "<li><div style='height: 20px;width: 100%;border-radius:5px;background-color: #003D82'>"
			            	+ "<div style='height: 20px;width: 15%;float: left;color:#F2FAFF;text-align:center;font-weight:bold; font-size:13px;  line-height:20px;'>" + data[2].AAC003 +"</div>"
			      			+ "<div style='height: 20px;width: 20%;margin-left: 15%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;'>" + data[2].AKA130 + "</div>"
			      			+ "<div style='height: 20px;width: 40%;margin-top: -20px;margin-left: 35%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;'>" +data[2].AKB021 + "</div>"
			      			+ "<div style='height: 20px;width: 25%;margin-top: -20px;margin-left: 75%;text-align:center;color:#F2FAFF; font-weight:bold; font-size:13px;  line-height:20px;'>" +data[2].AAE036+"</div></div></li>";
					}
					$($('.scrollDiv ul')[2]).html(html);
				}
			}
		});
	}
</script>
<!--  实时交易数据展示页面 -->

<div style="text-align:center;color:#fff;font-weight:bold; font-family:Verdana, Geneva, sans-serif; font-size:16px;margin-top:15px;">就医实时监控</div>
		<div id="jy">
			<div class="listsp">
            	<div class="scrollbox">
		    <ul>
		      <li>
		      	<div style="height: 20px;width: 100%;border-radius:5px;background-color: #0068BB">
		      		<div style="height: 20px;width: 15%;float: left;color:#F2FAFF;text-align:center;font-weight:bold; font-size:13px;  line-height:20px;">姓名</div>
		      		<div style="height: 20px;width: 20%;margin-left: 15%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;">类别</div>
		      		<div style="height: 20px;width: 40%;margin-top: -20px;margin-left: 35%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;">就医定点</div>
		      		<div style="height: 20px;width: 25%;margin-top: -20px;margin-left: 75%;text-align:center;color:#F2FAFF; font-weight:bold; font-size:13px;  line-height:20px;">经办日期</div>
		      	</div>
		      </li>
		    </ul>
			<div class="scrollDiv" id="realtimeHospitalize">
			   <ul>
			     <%
            		for (Object object : realtimeHospitalize) {
            			HashMap<String, Object> map = (HashMap<String, Object>)object;
            	 %>
			   	<li>
			   		<div style="height: 20px;width: 100%;border-radius:5px;background-color: #003D82">
		            	<div style="height: 20px;width: 15%;float: left;color:#F2FAFF;text-align:center;font-weight:bold; font-size:13px;  line-height:20px;"><%=map.get("AAC003") %></div>
		      			<div style="height: 20px;width: 20%;margin-left: 15%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;"><%=map.get("AKA130")%></div>
		      			<div style="height: 20px;width: 40%;margin-top: -20px;margin-left: 35%;color:#F2FAFF;text-align:center; font-weight:bold; font-size:13px;  line-height:20px;"><%=map.get("AKB021") %></div>
		      			<div style="height: 20px;width: 25%;margin-top: -20px;margin-left: 75%;text-align:center;color:#F2FAFF; font-weight:bold; font-size:13px;  line-height:20px;"><%=map.get("AAE036") %></div>
		            </div>
			   	</li>
			   	 <%	
            	  }
            	 %>
			   </ul>
			</div>
		</div>
            	 
            </div>
		</div>
